---
title: "Hysteria ستاپ کردن پروکسی شخصی"
subtitle:
date: 2024-04-01T16:27:36+03:30
tags: ["Hysteria", "Proxy", "VPN"]
language: en
draft: true
---

# مقدمه

سلام دوستای عزیز خوش اومدین به اولین آموزش این وبلاگ. این آموزش بهتون یاد میده چطور پروکسی شخصی خودتون رو با استفاده از هسته هیستریا ران کنین

اول اینکه چرا هیستریا؟ چرا از ویتوری استفاده نکنیم؟ دلیلش اینه که درحال حاظر مصرف ویتوری توی کشور بسیار بالا هست و همین باعث میشه بیشتر مورد هدف فایروال و دوستان فیلترچی قرار بگیره به همین منظور پروتوکل هایی که کمتر مورد استفاده قرار میگیرن دیرتر فیلترمیشن و برای مصارف شخصی بصرفه ترن.

## چیا نیاز دارم؟

- یه سرور (vps)

سرورتون باید لوکیشنش خارج باشه چون طبیعتا سرورای ایران مثل نتای ایران فیلتر هستن و بدردمون نمیخورن لوکیشنای پیشنهادی کشورای اروپایی هستن که روتینگ و پینگ بصرفه ای برای ایران دارن مثل المان دانمارک انگلستان فرانسه ترکیه و از این قبیل

ترجیها سرور روسیه و امریکا نگیرین روسیه اینستاگرام و سرویسای دیگش تحریمه و امریکا هم پینگ خوبی نمیده

سرور های امارات و ترکیه پینگای خوبی میدن و واسه گیم توصیه میشن

خب بریم سر ستاپ

## راه اندازی

خب اول اینکه سرورتون رو که خریدین سیستم عامل رو حتما یکی از توضیع های لینوکس بر پایه دبیان انتخاب کنین

- debain (10/11/12)
- ubuntu (18/20/22)

و از این قبیل که کارمون رو برای راه اندازی اسون تر میکنن. اگه موقع خرید سرور رو ویندوز یا چیزی خارج از اینا انتخاب کردین معمولا تمام پنلای وی پی اس این امکان رو اراعه میدن که سرور رو دوباره بسازین و سیستم عامل رو تغییر بدین
(rebuild)

خب حالا که سیستم عامل رو نصب کردین برنامه
cmd
رو توی ویندوز باز میکنین و کامند زیر رو میزنین

```
ssh <username>@<server_ip>
```

اینجا جای یوزرنیم باید یوزرنیم خودتون رو که توی اطلاعات خرید سرورتون هست وارد کنین که معمولا
root هست

و ایپی سرورتون رو هم همینطور

بعد که دستور رو زدین ازتون پسورد سرور رو میخواد که توی اطلاعات خرید سرور هست و واردش میکنین حالا دیگه باید وارد سرور شده باشین

اولین دستور هایی که بعد از راه اندازی هر سرور لینوکس میزنین باید این دوتا باشه

```shell
sudo apt update
sudo apt upgrade -y
```

این دوتا دستور پکیج ها یا همون برنامه هایی که روی سیسمتون نصب هست رو بروزرسانی میکنن

بعدش باید برای نصب اسکریپت از گیتهاب پکیج گیت رو نصب کنین

```shell
sudo apt install git -y
```

خب حالا میریم سراغ اصل کار. برای این مرحله من اومدم با اتوماتیک کردن فرایند ستاپ هیستریا این کارو واستون اب خوردن کردم. بطوری که شما فقط اسکریپت زیر رو نصب و اجرا میکنین و نوع پروکسی ای که میخواین براتون راه اندازی کنه رو انتخاب میکنین

```shell
git clone https://github.com/meower1/Supernova
```

خب این میاد پوشه ای که اسکریپت راه اندازی داخلشه رو از گیتهاب واستون کپی میکنه. حالا با کامند زیر واردش میشیم و اجراش میکنیم

```shell
cd Supernova/
```

```shell
sudo chmod +x supernova.sh
sudo ./supernova.sh
```

حالا اسکریپت اجرا میشه و باید مشابه عکس زیر توی این منو باشین
![Menu](https://github.com/meower1/Supernova/blob/main/img/2.png?raw=true)

خب الان همونطور که واضحه گرینه اول برای ما هیستریا رو راه اندازی میکنه پس گزینه 1 رو توی ترمینال تایپ میکنیم.
طریقه کارکرد اسکریپت اینطور هست که چک میکنه داکر که یک ابزار امنیتی/کاربردی هست اگه روی سیستمتون نصب نبود نصبش میکنه و بعدش توی مسیر زیر کانفیگ هیستریا رو براتون با تنظیمات مناسب میسازه و هسته رو از داخل کانتینر داکر اجرا میکنه. نیازی نیست متوجه بشین پاراگراف بالا رو صرفا برای کسایی که علاقه مند هستن که بدونن

مسیر کانفیگ هیستریا

`/root/Supernova/hysteria/config.yaml`

بعد از اجرای اسکریپت بهمون لینک رو میده که با

`hy2://link`

شروع میشه. اون رو کپی میکنیم و یکی از برنامه های زیر رو برای اجرا نصب میکنیم

- Android :
  [Nekobox](https://github.com/MatsuriDayo/NekoBoxForAndroid/releases/download/1.2.9/NB4A-1.2.9-arm64-v8a.apk)
- Windows :
  [Nekoray](https://github.com/MatsuriDayo/nekoray/releases/download/3.26/nekoray-3.26-2023-12-09-windows64.zip)
- Linux (Debian based):
  [Nekoray](https://github.com/MatsuriDayo/nekoray/releases/download/3.26/nekoray-3.26-2023-12-09-debian-x64.deb)
- Ios/MacOS :
  [Streisand](https://apps.apple.com/us/app/streisand/id6450534064)

بعد از کپی کردن لینکی که توی سرورمون دریافت کردیم و نصب برنامه واردش میشیم و به این صورت عمل میکنیم

![nekobox1](https://github.com/meower1/Supernova/blob/main/img/moa1.jpg?raw=true)
![nekobox2](https://github.com/meower1/Supernova/blob/main/img/moa2_fix.jpg?raw=true)

الان یه پروفایل جدید واسمون اضافه میشه. روش کلیک میکنیم و دکمه موشک پایین صفحه رو میزنیم به همین سادگی!

روی ویندوز باید اول هسته رو به سینگ باکس تغییر بدیم بعد میتونیم وصل بشیم

![nekoray1](https://github.com/meower1/Supernova/blob/main/img/moa4_fix.jpg?raw=true)
![nekoray2](https://github.com/meower1/Supernova/blob/main/img/moa4.jpg?raw=true)

برای ایفون هم شبیه اندروید عمل میکنین چیز خاصی نداره
![streisand1](https://github.com/meower1/Supernova/blob/main/img/moa11.jpg?raw=true)

برای مکبوک گزینه تان مود کار نمیکنه و باید از یک برنامه جانبی به اسم
proxifier
کمک بگیریم. طریقه کارکردش اینطور هست که ما داخل نکوری به کانفیگ که وصل شدیم برای اینکه کل سیستم بتونه از کانفیگ استفاده کنه تمام سیستم رو با برنامه پروکسیفایر پروکسی میکنیم

برنامه رو از اینجا نصب میکنیم
[Proxifier](https://www.proxifier.com/download/ProxifierMac.dmg)

دانلود که کردیم وارد برنامه میشیم. ازمون کلید برای فعالسازی میخواد که این رو وارد میکنیم

```
3CWNN-WYTP4-SD83W-ASDFR-84KEA
```

وارد که شدین طبق تصاویر عمل کنین
![nekoray1](https://github.com/meower1/Supernova/blob/main/img/moa5.jpg?raw=true)
![nekoray2](https://github.com/meower1/Supernova/blob/main/img/moa6.jpg?raw=true)
![nekoray3](https://github.com/meower1/Supernova/blob/main/img/moa7.jpg?raw=true)
![nekoray4](https://github.com/meower1/Supernova/blob/main/img/moa8.jpg?raw=true)
![nekoray5](https://github.com/meower1/Supernova/blob/main/img/moa9.jpg?raw=true)
![nekoray6](https://github.com/meower1/Supernova/blob/main/img/moa10.jpg?raw=true)

الان تمام سیستمتون باید پروکسی شده باشه و بتونین از فیلترشکنتون برای برنامه های دیگه هم استفاده کنین

## تنظیمات هیستریا

اینجا چندتا کامند بدرد بخور برای مدیریت سرویس هیستریا بهتون میگم
برای متوقف کردن و راه اندازی دوباره

```shell
sudo docker stop hysteria
sudo docker start hysteria
```

برای پاک کردن هیستریا

```shell
sudo docker rm -f hysteria
```

چک کردن لاگ ها برای رفع ایراد

```shell
sudo docker logs hysteria
```
